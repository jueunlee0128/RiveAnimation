<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rive 모음</title>
    <script src="https://unpkg.com/@rive-app/canvas@2.7.0"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>(미정) Rive 애니메이션</h1>
    
    <div class="gallery-grid" id="gallery">
        </div>

    <script>
        const REPO_URL = window.location.origin + window.location.pathname.replace('index.html', '');
        const RIVE_FOLDER = 'rive/';

        const files = [
            { file: 'TabIconSet.riv', artboard: 'eye-CLICK', name: '눈' },
            { file: 'TabIconSet.riv', artboard: 'Gear-CLICK', name: '기어' },
            { file: 'TabIconSet.riv', artboard: 'Home-CLICK', name: '홈' },
            { file: 'TabIconSet.riv', artboard: 'Zap-CLICK', name: '번개' },
            { file: 'TabIconSet.riv', artboard: 'Cursor-CLICK', name: '커서' },
            { file: 'TabIconSet.riv', artboard: 'At-sign-CLICK', name: '골뱅' },
            { file: 'TabIconSet.riv', artboard: 'Mail-CLICK', name: '메일' },
            { file: 'TabIconSet.riv', artboard: 'Message-CLICK', name: '메세지' },
            { file: 'TabIconSet.riv', artboard: 'User-CLICK', name: '유저' },
            { file: 'TabIconSet.riv', artboard: 'Wifi-CLICK', name: '와이파이' },
            { file: 'TabIconSet.riv', artboard: 'Fingerprint-CLICK', name: '지문' },
            { file: 'TabIconSet.riv', artboard: 'Clock-CLICK', name: '시계' },
            { file: 'TabIconSet.riv', artboard: 'Stars-CLICK', name: '별' },
            { file: 'TabIconSet.riv', artboard: 'Arrow-CLICK', name: '화살표' },
            { file: 'TabIconSet.riv', artboard: 'Diamond-CLICK', name: '다이아몬드' },
            { file: 'TabIconSet.riv', artboard: 'Edit-CLICK', name: '수정' },
            { file: 'TabIconSet.riv', artboard: 'Dots-CLICK', name: '더보기' },
            { file: 'TabIconSet.riv', artboard: 'Sun-CLICK', name: '다크모드' },
            { file: 'TabIconSet.riv', artboard: 'Refresh-CLICK', name: '새로고침' },
        ];

        const gallery = document.getElementById('gallery');

        files.forEach((item, index) => {
            const fullUrl = `${REPO_URL}${RIVE_FOLDER}${item.file}`;
            const card = document.createElement('div');
            card.className = 'card';
            const canvasId = `canvas-${index}`;

            card.innerHTML = `
                <canvas id="${canvasId}"></canvas>
                <div class="file-name">${item.name}</div>
                ${item.artboard ? `<span class="badge">Artboard: ${item.artboard}</span>` : ''}
                <div class="link-container">
                    <input type="text" class="link-input" value="${fullUrl}" readonly>
                    <button class="copy-btn" onclick="copyLink(this, '${fullUrl}')">Copy</button>
                </div>
            `;
            gallery.appendChild(card);

            const r = new rive.Rive({
                src: fullUrl,
                canvas: document.getElementById(canvasId),
                autoplay: true,
                artboard: item.artboard,
                stateMachines: "State-machine",
                onLoad: () => {
                    r.resizeDrawingSurfaceToCanvas();
                }
            });

            document.getElementById(canvasId).addEventListener('click', () => {
                
                if (!inputs) return;

                const targetInput = inputs.find(i => 
                    i.name.toLowerCase() === 'active' || 
                    i.name.toLowerCase() === 'click' || 
                    i.name.toLowerCase() === 'trigger' ||
                    i.name.toLowerCase() === 'hover'
                );

                if (targetInput) {
                    if (targetInput.type === rive.StateMachineInputType.Boolean) {
                        targetInput.value = !targetInput.value;
                    } 
                    else if (targetInput.type === rive.StateMachineInputType.Trigger) {
                        targetInput.fire();
                    }
                } else {
                    console.log("클릭 가능한 Input을 찾지 못했습니다. Input 이름을 확인하세요:", inputs.map(i => i.name));
                }
            });
        });

        function copyLink(btn, text) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.innerText;
                btn.innerText = 'OK!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>

</html>

